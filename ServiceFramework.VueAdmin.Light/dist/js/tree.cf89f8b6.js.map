{"version":3,"sources":["webpack:///./src/views/site/navigationMenu.vue?27dd","webpack:///./src/api/siteSetting.ts","webpack:///./src/views/site/navigationMenu.vue?9388","webpack:///./src/views/site/navigationMenu.vue?fc69","webpack:///./src/views/site/navigationMenu.vue","webpack:///./src/views/site/navigationMenu.vue?0edd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","edit","_v","staticStyle","model","value","callback","$$v","filterText","expression","data2","defaultProps","scopedSlots","_u","key","fn","ref","node","data","_s","label","flowNo","remove","d_title","dialogVisible","handleClose","form","$set","slot","comfirmEdit","staticRenderFns","request","url","method","params","id","name","parentId","operate","children","d_titles","fetchCatagory","$refs","tree2","filter","indexOf","Object","assign","parent","length","$message","$notify","title","message","type","duration","component"],"mappings":"6GAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIU,KAAK,KAAK,MAAM,CAACV,EAAIW,GAAG,sBAAsBP,EAAG,WAAW,CAACQ,YAAY,CAAC,gBAAgB,QAAQL,MAAM,CAAC,YAAc,kBAAkBM,MAAM,CAACC,MAAOd,EAAc,WAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,WAAWD,GAAKE,WAAW,gBAAgBd,EAAG,UAAU,CAACG,MAAM,CAAC,KAAOP,EAAImB,MAAM,WAAW,KAAK,MAAQnB,EAAIoB,aAAa,qBAAqB,GAAG,wBAAuB,GAAOC,YAAYrB,EAAIsB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GACvoB,IAAIC,EAAOD,EAAIC,KACXC,EAAOF,EAAIE,KACf,OAAOvB,EAAG,OAAO,CAACE,YAAY,oBAAoB,CAACF,EAAG,OAAO,CAACJ,EAAIW,GAAGX,EAAI4B,GAAGF,EAAKG,UAAUzB,EAAG,OAAO,CAACJ,EAAIW,GAAGX,EAAI4B,GAAGD,EAAKG,WAAW1B,EAAG,OAAO,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQC,GAAG,CAAC,MAAQ,WAAc,OAAOR,EAAIU,KAAKiB,EAAK,MAAQ,CAAC3B,EAAIW,GAAG,kCAAkCP,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQC,GAAG,CAAC,MAAQ,WAAc,OAAOR,EAAIU,KAAKiB,EAAK,MAAQ,CAAC3B,EAAIW,GAAG,kCAAkCP,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQC,GAAG,CAAC,MAAQ,WAAc,OAAOR,EAAI+B,OAAOL,EAAMC,MAAW,CAAC3B,EAAIW,GAAG,mCAAmC,WAAWP,EAAG,YAAY,CAACqB,IAAI,aAAalB,MAAM,CAAC,MAAQP,EAAIgC,QAAQ,QAAUhC,EAAIiC,cAAc,MAAQ,MAAM,eAAejC,EAAIkC,aAAa1B,GAAG,CAAC,iBAAiB,SAASC,GAAQT,EAAIiC,cAAcxB,KAAU,CAACL,EAAG,UAAU,CAACS,MAAM,CAACC,MAAOd,EAAQ,KAAEe,SAAS,SAAUC,GAAMhB,EAAImC,KAAKnB,GAAKE,WAAW,SAAS,CAACd,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,cAAc,UAAU,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,aAAe,OAAOM,MAAM,CAACC,MAAOd,EAAImC,KAAS,KAAEpB,SAAS,SAAUC,GAAMhB,EAAIoC,KAAKpC,EAAImC,KAAM,OAAQnB,IAAME,WAAW,gBAAgB,IAAI,GAAGd,EAAG,UAAU,CAACS,MAAM,CAACC,MAAOd,EAAQ,KAAEe,SAAS,SAAUC,GAAMhB,EAAImC,KAAKnB,GAAKE,WAAW,SAAS,CAACd,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,cAAc,UAAU,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,aAAe,OAAOM,MAAM,CAACC,MAAOd,EAAImC,KAAQ,IAAEpB,SAAS,SAAUC,GAAMhB,EAAIoC,KAAKpC,EAAImC,KAAM,MAAOnB,IAAME,WAAW,eAAe,IAAI,GAAGd,EAAG,UAAU,CAACS,MAAM,CAACC,MAAOd,EAAQ,KAAEe,SAAS,SAAUC,GAAMhB,EAAImC,KAAKnB,GAAKE,WAAW,SAAS,CAACd,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,KAAK,cAAc,UAAU,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,aAAe,OAAOM,MAAM,CAACC,MAAOd,EAAImC,KAAW,OAAEpB,SAAS,SAAUC,GAAMhB,EAAIoC,KAAKpC,EAAImC,KAAM,SAAUnB,IAAME,WAAW,kBAAkB,IAAI,GAAGd,EAAG,OAAO,CAACE,YAAY,gBAAgBC,MAAM,CAAC,KAAO,UAAU8B,KAAK,UAAU,CAACjC,EAAG,YAAY,CAACI,GAAG,CAAC,MAAQ,SAASC,GAAQT,EAAIiC,eAAgB,KAAS,CAACjC,EAAIW,GAAG,SAASP,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIsC,cAAc,CAACtC,EAAIW,GAAG,SAAS,IAAI,IAAI,IAC3gE4B,EAAkB,G,kICDT,EAAW,kBACtB,OAAAC,EAAA,MAAQ,CACNC,IAAK,uBACLC,OAAQ,SAGC,EAAW,SAACf,GAAD,OACtB,OAAAa,EAAA,MAAQ,CACNC,IAAK,uBACLC,OAAQ,OACRf,UAES,EAAa,SAACgB,GAAD,OACxB,OAAAH,EAAA,MAAQ,CACNC,IAAK,0BAA4BE,EACjCD,OAAQ,SCwDZ,+D,+DACU,EAAAP,KAAO,CACbS,GAAI,EACJC,KAAM,GACNJ,IAAK,GACLX,OAAO,EACPgB,SAAU,KACVC,QAAS,GAEH,EAAA9B,WAAa,GACb,EAAAE,MAAQ,GACR,EAAAC,aAAe,CACrB4B,SAAU,WACVnB,MAAO,QAED,EAAAG,QAAU,GACV,EAAAiB,SAAW,CAAC,KAAM,KAAM,MACxB,EAAAhB,eAAgB,EAjB1B,+EAmBIhC,KAAKiD,kBAnBT,0MAsB2B,IAtB3B,gBAsBYvB,EAtBZ,EAsBYA,KACR1B,KAAKkB,MAAQQ,EAvBjB,kJA0B6Bb,GACxBb,KAAKkD,MAAMC,MAAiBC,OAAOvC,KA3BxC,iCA8BqBA,EAAea,GAChC,OAAKb,GACEa,EAAKE,QAAwC,IAA/BF,EAAKE,MAAMyB,QAAQxC,KAhC5C,sFAmCqBa,EAAgBoB,GAnCrC,iFAoCI9C,KAAKgC,eAAgB,EACrBhC,KAAK+B,QAAU/B,KAAKgD,SAASF,GAE3B9C,KAAKkC,KADQ,GAAXY,EACUQ,OAAOC,OAAOvD,KAAKkC,KAAMR,EAAM,CAACoB,QAASA,IAEzC,CAAEH,GAAI,EAAGC,KAAM,GAAIC,SAAkB,MAARnB,EAAe,KAAOA,EAAMiB,GAAGH,IAAI,GAAGX,OAAO,EAAEiB,QAASA,GAzCvG,oMAkDuBrB,EAAkCC,GAlDzD,0FAmDU8B,EAAS/B,EAAK+B,OACHA,EAAQ9B,KAAKqB,WAE1BrB,GAAQA,EAAKqB,SAAUU,OAAS,GAtDxC,uBAuDMzD,KAAK0D,SAAS,SAvDpB,0BA0DI1D,KAAKS,KAAKiB,EAAM,GA1DpB,+RAiE6B,GAArB1B,KAAKkC,KAAKY,SAAkC,IAAlB9C,KAAKkC,KAAKU,KAjE5C,oDAqE6B,GAArB5C,KAAKkC,KAAKY,QArElB,gCAsEY,EAAS9C,KAAKkC,MAtE1B,6CAwEY,EAAWlC,KAAKkC,KAAKS,IAxEjC,OAyEI3C,KAAK2D,QAAQ,CACXC,MAAO,UACPC,QAAS,GAAF,OAAK7D,KAAKgD,SAAShD,KAAKkC,KAAKY,SAA7B,iBACPgB,KAAM,UACNC,SAAU,MAEZ/D,KAAKgC,eAAgB,EACrBhC,KAAKiD,gBAhFT,4XAA6B,QA0B3B,gBADC,eAAM,e,iCAGN,MA5BH,kBAHC,eAAU,CACTL,KAAM,oBAwFP,G,QChK0Z,I,yBCQvZoB,EAAY,eACd,EACAlE,EACAwC,GACA,EACA,KACA,WACA,MAIa,aAAA0B,E,uECnBf,yBAAyoB,EAAG","file":"js/tree.cf89f8b6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.edit(null,0)}}},[_vm._v(\"\\n      添加\\n    \")]),_c('el-input',{staticStyle:{\"margin-bottom\":\"30px\"},attrs:{\"placeholder\":\"Filter keyword\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}}),_c('el-tree',{attrs:{\"data\":_vm.data2,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"default-expand-all\":\"\",\"expand-on-click-node\":false},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_c('span',[_vm._v(_vm._s(data.flowNo))]),_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.edit(data,0); }}},[_vm._v(\"\\n            添加\\n          \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.edit(data,1); }}},[_vm._v(\"\\n            编辑\\n          \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.remove(node, data); }}},[_vm._v(\"\\n            删除\\n          \")])],1)])}}])}),_c('el-dialog',{ref:\"editDialog\",attrs:{\"title\":_vm.d_title,\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}},[_c('el-form-item',{attrs:{\"label\":\"导航名称\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1),_c('el-form',{model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}},[_c('el-form-item',{attrs:{\"label\":\"导航地址\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.url),callback:function ($$v) {_vm.$set(_vm.form, \"url\", $$v)},expression:\"form.url\"}})],1)],1),_c('el-form',{model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}},[_c('el-form-item',{attrs:{\"label\":\"排序\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.flowNo),callback:function ($$v) {_vm.$set(_vm.form, \"flowNo\", $$v)},expression:\"form.flowNo\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.comfirmEdit}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\n\n\nexport const getMenus = () =>\n  request({\n    url: '/navigation/getMenus',\n    method: 'get'\n\n  })\nexport const postMenu = (data: any) =>\n  request({\n    url: '/navigation/postMenu',\n    method: 'post',\n    data\n  })\nexport const deleteMenu = (params: any) =>\n  request({\n    url: '/navigation/deleteMenu/' + params,\n    method: 'get',\n\n  })\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from 'vue-property-decorator'\nimport { Tree as ElTree, Dialog as ELDialog } from 'element-ui'\nimport { TreeData, TreeNode } from 'element-ui/types/tree'\nimport { getMenus, postMenu, deleteMenu } from '@/api/siteSetting'\n@Component({\n  name: 'NavigationMenu'\n})\nexport default class extends Vue {\n  private form = {\n    id: 0,\n    name: '',\n    url: '',\n    flowNo:0,\n    parentId: null,\n    operate: 0\n  }\n  private filterText = '';\n  private data2 = [];\n  private defaultProps = {\n    children: 'children',\n    label: 'name'\n  };\n  private d_title = ''\n  private d_titles = ['添加', '编辑', '删除']\n  private dialogVisible = false\n  created() {\n    this.fetchCatagory()\n  }\n  private async fetchCatagory() {\n    const { data } = await getMenus()\n    this.data2 = data\n  }\n  @Watch('filterText')\n  private onFilterTextChange(value: string) {\n    (this.$refs.tree2 as ElTree).filter(value)\n  }\n\n  private filterNode(value: string, data: TreeData) {\n    if (!value) { return true }\n    return data.label && data.label.indexOf(value) !== -1\n  }\n  //private id = 1000\n  private async edit(data: TreeData, operate: number) {\n    this.dialogVisible = true\n    this.d_title = this.d_titles[operate]\n    if (operate != 0)\n      this.form = Object.assign(this.form, data, {operate: operate })\n    else\n      this.form = { id: 0, name: '', parentId: data == null ? null : data!.id,url:'',flowNo:0,operate: operate }\n\n    //const newChild = { id: this.id++, label: 'testtest', children: [] }\n    //if (!data.children) {\n    //  this.$set(data, 'children', [])\n    //}\n    //data.children!.push(newChild)\n  }\n\n  private async remove(node: TreeNode<number, TreeData>, data: TreeData) {\n    const parent = node.parent\n    const children = parent!.data.children\n\n    if (data && data.children!.length > 0) {\n      this.$message('存在子节点')\n      return\n    }\n    this.edit(data, 2)\n    //const index = children!.findIndex(d => d.id === data.id)\n    //children!.splice(index, 1)\n  }\n\n  private async comfirmEdit() {\n\n    if (this.form.operate != 2 && this.form.name == '') {\n\n      return\n    }\n    if (this.form.operate != 2)\n      await postMenu(this.form);\n    else\n      await deleteMenu(this.form.id)\n    this.$notify({\n      title: 'Success',\n      message: `${this.d_titles[this.form.operate]} successfully`,\n      type: 'success',\n      duration: 2000\n    })\n    this.dialogVisible = false\n    this.fetchCatagory()\n  }\n\n  private async handleClose() {\n\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./navigationMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./navigationMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./navigationMenu.vue?vue&type=template&id=63a8016c&scoped=true&\"\nimport script from \"./navigationMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./navigationMenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./navigationMenu.vue?vue&type=style&index=0&id=63a8016c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63a8016c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./navigationMenu.vue?vue&type=style&index=0&id=63a8016c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./navigationMenu.vue?vue&type=style&index=0&id=63a8016c&lang=scss&scoped=true&\""],"sourceRoot":""}