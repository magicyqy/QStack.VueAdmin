(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{1962:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("product-detail",{attrs:{"is-edit":!1}})},n=[],o=r("d225"),i=r("308d"),s=r("6bb5"),c=r("4e2b"),l=r("9ab4"),u=r("60a3"),p=r("92a1"),d=function(e){function t(){return Object(o["a"])(this,t),Object(i["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(u["c"]);d=Object(l["a"])([Object(u["a"])({name:"CreateProduct",components:{ProductDetail:p["a"]}})],d);var m=d,f=m,h=r("2877"),b=Object(h["a"])(f,a,n,!1,null,null,null);t["default"]=b.exports},"1e55":function(e,t,r){},3084:function(e,t,r){"use strict";var a=r("5641"),n=r.n(a);n.a},4372:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"g",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"b",(function(){return p}));var a=r("b32d"),n={id:0,name:"",imageUrl:"",imageThumbUrl:"",productCategoryId:0,price:0,rebatePrice:0,purchasePrice:0,norm:"",productContent:"",seoTitle:"",seoKeyWord:"",seoDescription:"",state:0,createDate:"",publishDate:"",productImages:[],productDownloads:[]},o=function(e){return Object(a["a"])({url:"/product/getProducts",method:"post",data:e})},i=function(e){return Object(a["a"])({url:"/product/get/"+e,method:"get"})},s=function(e){return Object(a["a"])({url:"/product/postProduct",method:"post",data:e})},c=function(){return Object(a["a"])({url:"/product/getCatagories",method:"get"})},l=function(e){return Object(a["a"])({url:"/product/updateProductState",method:"post",params:e})},u=function(e){return Object(a["a"])({url:"/product/postCatagory",method:"post",data:e})},p=function(e){return Object(a["a"])({url:"/product/deleteCatagory/"+e,method:"get"})}},4930:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("product-detail",{attrs:{"is-edit":!0}})},n=[],o=r("d225"),i=r("308d"),s=r("6bb5"),c=r("4e2b"),l=r("9ab4"),u=r("60a3"),p=r("92a1"),d=function(e){function t(){return Object(o["a"])(this,t),Object(i["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),t}(u["c"]);d=Object(l["a"])([Object(u["a"])({name:"EditProduct",components:{ProductDetail:p["a"]}})],d);var m=d,f=m,h=r("2877"),b=Object(h["a"])(f,a,n,!1,null,null,null);t["default"]=b.exports},5641:function(e,t,r){},"5cd8":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-cascader",{ref:"cascader",attrs:{options:e.cascaderOptions,props:e.cascaderProps},on:{change:e.handleChange},model:{value:e.catagory,callback:function(t){e.catagory=t},expression:"catagory"}})},n=[],o=(r("96cf"),r("3b8d")),i=r("d225"),s=r("b0b4"),c=r("308d"),l=r("6bb5"),u=r("4e2b"),p=r("9ab4"),d=r("60a3"),m=r("4372"),f=r("75fb"),h=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.cascaderOptions=[],e.cascaderProps={value:"id",label:"name",children:"children",checkStrictly:!0},e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"created",value:function(){this.fetchCatagory()}},{key:"fetchCatagory",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["c"])();case 2:t=e.sent,r=t.data,this.cascaderOptions=r;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleChange",value:function(e){}},{key:"catagory",get:function(){return this.catagoryPath?Object(f["c"])(this.cascaderOptions,this.catagoryPath).map((function(e){return e.id})):[]},set:function(e){this.$emit("input",e[e.length-1])}}]),t}(d["c"]);Object(p["a"])([Object(d["b"])({default:null})],h.prototype,"catagoryPath",void 0),h=Object(p["a"])([Object(d["a"])({name:"catagoryDropdown"})],h);var b=h,v=b,g=r("2877"),y=Object(g["a"])(v,a,n,!1,null,"7747c470",null);t["a"]=y.exports},6857:function(e,t,r){},"8b1d":function(e,t,r){"use strict";var a=r("1e55"),n=r.n(a);n.a},"92a1":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"postForm",attrs:{model:e.postForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"标题"}},[r("el-input",{model:{value:e.postForm.name,callback:function(t){e.$set(e.postForm,"name",t)},expression:"postForm.name"}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("el-col",{attrs:{span:11}},[r("el-input",{model:{value:e.postForm.imageUrl,callback:function(t){e.$set(e.postForm,"imageUrl",t)},expression:"postForm.imageUrl"}})],1),r("el-col",{attrs:{span:4}},[r("editor-image-upload",{staticClass:"editor-upload-btn",attrs:{color:e.uploadButtonColor},on:{successCBK:e.imageSuccessCover}})],1)],1),r("el-form-item",{attrs:{label:"缩略图"}},[r("el-col",{attrs:{span:11}},[r("el-input",{model:{value:e.postForm.imageThumbUrl,callback:function(t){e.$set(e.postForm,"imageThumbUrl",t)},expression:"postForm.imageThumbUrl"}})],1),r("el-col",{attrs:{span:4}},[r("editor-image-upload",{staticClass:"editor-upload-btn",attrs:{color:e.uploadButtonColor},on:{successCBK:e.imageSuccessThumb}})],1)],1),r("el-form-item",{attrs:{label:"类别"}},[r("catagoryDropdown",{attrs:{catagoryPath:e.postForm.productCategoryId}})],1),r("el-form-item",{attrs:{label:"价格"}},[r("el-input",{model:{value:e.postForm.price,callback:function(t){e.$set(e.postForm,"price",t)},expression:"postForm.price"}})],1),r("el-form-item",{attrs:{label:"折扣价"}},[r("el-input",{model:{value:e.postForm.rebatePrice,callback:function(t){e.$set(e.postForm,"rebatePrice",t)},expression:"postForm.rebatePrice"}})],1),r("el-form-item",{attrs:{label:"成本价"}},[r("el-input",{model:{value:e.postForm.purchasePrice,callback:function(t){e.$set(e.postForm,"purchasePrice",t)},expression:"postForm.purchasePrice"}})],1),r("el-form-item",{attrs:{label:"规格"}},[r("el-input",{model:{value:e.postForm.purchasePrice,callback:function(t){e.$set(e.postForm,"purchasePrice",t)},expression:"postForm.purchasePrice"}})],1),r("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"content"}},[e.tinymceActive?r("tinymce",{ref:"editor",attrs:{height:400},model:{value:e.postForm.productContent,callback:function(t){e.$set(e.postForm,"productContent",t)},expression:"postForm.productContent"}}):e._e()],1),r("el-form-item",{attrs:{label:"seoTitle"}},[r("el-input",{model:{value:e.postForm.seoTitle,callback:function(t){e.$set(e.postForm,"seoTitle",t)},expression:"postForm.seoTitle"}})],1),r("el-form-item",{attrs:{label:"seoKeyWord"}},[r("el-input",{model:{value:e.postForm.seoKeyWord,callback:function(t){e.$set(e.postForm,"seoKeyWord",t)},expression:"postForm.seoKeyWord"}})],1),r("el-form-item",{attrs:{label:"seoDescription"}},[r("el-input",{model:{value:e.postForm.seoDescription,callback:function(t){e.$set(e.postForm,"seoDescription",t)},expression:"postForm.seoDescription"}})],1),r("el-form-item",{attrs:{label:"状态"}},[r("el-select",{attrs:{placeholder:""},model:{value:e.postForm.state,callback:function(t){e.$set(e.postForm,"state",t)},expression:"postForm.state"}},[r("el-option",{attrs:{label:"已上架",value:1}}),r("el-option",{attrs:{label:"未上架",value:0}})],1)],1),r("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"创建时间:"}},[r("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"Select date and time"},model:{value:e.postForm.createDate,callback:function(t){e.$set(e.postForm,"createDate",t)},expression:"postForm.createDate"}})],1),r("el-form-item",{attrs:{label:"图片"}},[r("el-card",{staticClass:"box-card"},[r("el-upload",{staticClass:"upload-demo",attrs:{"with-credentials":!0,action:e.postAction,"on-success":e.onSuccess,"before-remove":e.beforeRemove,multiple:"",limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),r("el-form-item",{attrs:{label:"下载"}},[r("el-card",[e._l(e.postForm.productDownloads,(function(t,a){return r("el-card",{key:t.id+a,staticStyle:{"margin-top":"5px"}},[r("el-button",{staticStyle:{padding:"3px 0",top:"-10px",position:"relative",left:"0px"},attrs:{id:t.id+a,icon:"el-icon-close",type:"text"},on:{click:function(r){return e.deleteDowload(t,a)}}}),r("el-form-item",{attrs:{label:"地址"}},[r("el-input",{model:{value:t.downloadUrl,callback:function(r){e.$set(t,"downloadUrl",r)},expression:"domain.downloadUrl"}})],1),r("el-form-item",{attrs:{label:"分享码"}},[r("el-input",{model:{value:t.validCode,callback:function(r){e.$set(t,"validCode",r)},expression:"domain.validCode"}})],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{model:{value:t.extDesc,callback:function(r){e.$set(t,"extDesc",r)},expression:"domain.extDesc"}})],1)],1)})),r("el-button",{attrs:{size:"small"},on:{click:e.addDownload}},[e._v("添加")])],2)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\n          保存\n        ")])],1)],1)],1)},n=[],o=(r("20d6"),r("7f7f"),r("96cf"),r("3b8d")),i=r("d225"),s=r("b0b4"),c=r("308d"),l=r("6bb5"),u=r("4e2b"),p=r("9ab4"),d=r("60a3"),m=r("7383"),f=r("e741"),h=r("8256"),b=r("6b45"),v=r("cb37"),g=r("5cd8"),y=r("4372"),k=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.rules={name:[{required:!0,message:"请输入名称",trigger:"blur"}],productCategoryId:[{required:!0,message:"请输入类别",trigger:"blur"}]},e.postForm=Object.assign({},y["a"]),e.tinymceActive=!0,e.fileList=[],e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isEdit){e.next=4;break}return t=this.$route.params&&this.$route.params.id,e.next=4,this.fetchData(parseInt(t));case 4:document.title="编辑商品- ".concat(this.postForm.id),r=Object.assign({},this.$route),r.tagTitle=document.title,f["a"].updateVisitedView(r);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deactivated",value:function(){this.tinymceActive=!1}},{key:"activated",value:function(){this.tinymceActive=!0}},{key:"fetchData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y["d"])(t);case 3:r=e.sent,a=r.data,this.postForm=a,this.loadImages(this.postForm.productImages),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadImages",value:function(e){var t=this;e.map((function(e){return t.fileList.push({name:e.imageUrl})}))}},{key:"onSubmit",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(y["g"])(this.postForm);case 2:t=e.sent,r=t.data,this.$message({message:"submit success ",type:"success"}),this.isEdit||this.$router.push({path:"/shop/productedit/"+r});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onCancel",value:function(){this.$message({message:"cancel!",type:"warning"})}},{key:"handleExceed",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+r.length," 个文件"));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"beforeRemove",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.$confirm("确定移除 ".concat(t.name,"？")).then((function(){a.postForm.productImages.splice(a.postForm.productImages.findIndex((function(e){return e.imageUrl==t.name})),1)})).catch((function(){return Promise.reject()})));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"onSuccess",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.name=t.data.url,this.postForm.productImages.push({id:0,productId:this.postForm.id,imageUrl:t.data.url,uploadFileId:t.data.id});case 2:case"end":return e.stop()}}),e,this)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"addDownload",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.postForm.productDownloads.push({id:0,productId:this.postForm.id,downloadUrl:"",validCode:"",extDesc:""});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteDowload",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.postForm.productDownloads.splice(r,1);case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"imageSuccessCover",value:function(e){this.postForm.imageUrl=e[0].url}},{key:"imageSuccessThumb",value:function(e){this.postForm.imageThumbUrl=e[0].url}},{key:"postAction",get:function(){return"https://www.magicyqy.cn/api/uploader/upload"}},{key:"uploadButtonColor",get:function(){return m["a"].theme}}]),t}(d["c"]);Object(p["a"])([Object(d["b"])({default:!1})],k.prototype,"isEdit",void 0),k=Object(p["a"])([Object(d["a"])({name:"ProductDetail",components:{Tinymce:h["a"],UploadImage:b["a"],catagoryDropdown:g["a"],EditorImageUpload:v["a"]}})],k);var w=k,x=w,O=(r("3084"),r("2877")),j=Object(O["a"])(x,a,n,!1,null,"1a50d7ee",null);t["a"]=j.exports},"93fa":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-input",{staticStyle:{"margin-bottom":"30px"},attrs:{placeholder:"Filter keyword"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),r("el-tree",{ref:"tree",attrs:{data:e.data2,"node-key":"id",props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,n=t.data;return r("span",{staticClass:"custom-tree-node"},[r("span",[e._v(e._s(a.label))]),r("span",[r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.edit(n,0)}}},[e._v("\n          添加\n        ")]),n.id>0?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.edit(n,1)}}},[e._v("\n          编辑\n        ")]):e._e(),n.id>0?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(a,n)}}},[e._v("\n          删除\n        ")]):e._e()],1)])}}])}),r("el-dialog",{ref:"editDialog",attrs:{title:e.d_title,visible:e.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[r("el-form-item",{attrs:{label:"类别名称","label-width":"120px"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"Code","label-width":"120px"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),r("el-form-item",{attrs:{label:"url","label-width":"120px"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),r("el-form-item",{attrs:{label:"seoTitle","label-width":"120px"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.seoTitle,callback:function(t){e.$set(e.form,"seoTitle",t)},expression:"form.seoTitle"}})],1),r("el-form-item",{attrs:{label:"seoKeyWord","label-width":"120px"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.seoKeyWord,callback:function(t){e.$set(e.form,"seoKeyWord",t)},expression:"form.seoKeyWord"}})],1),r("el-form-item",{attrs:{label:"seoDescription","label-width":"120px"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.seoDescription,callback:function(t){e.$set(e.form,"seoDescription",t)},expression:"form.seoDescription"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.comfirmEdit}},[e._v("确定")])],1)],1)],1)},n=[],o=r("75fc"),i=(r("c5f6"),r("7f7f"),r("96cf"),r("3b8d")),s=r("d225"),c=r("b0b4"),l=r("308d"),u=r("6bb5"),p=r("4e2b"),d=r("9ab4"),m=r("60a3"),f=r("4372"),h=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.form={id:0,name:"",url:"",code:"",seoTitle:"",seoKeyWord:"",seoDescription:"",parentId:null,operate:0},e.root={id:-1,parentId:null,name:"全部",code:"",children:[]},e.filterText="",e.data2=[],e.defaultProps={children:"children",label:"name"},e.d_title="",e.d_titles=["添加","编辑","删除"],e.dialogVisible=!1,e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"created",value:function(){this.fetchCatagory()}},{key:"fetchCatagory",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["c"])();case 2:t=e.sent,r=t.data,this.root.children=r,this.data2.push(this.root);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onFilterTextChange",value:function(e){this.$refs.tree2.filter(e)}},{key:"filterNode",value:function(e,t){return!e||t.label&&-1!==t.label.indexOf(e)}},{key:"edit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.dialogVisible=!0,this.d_title=this.d_titles[r],this.form=0!=r?{id:t.id,name:t.name,parentId:t.parentId,operate:r,url:"",seoTitle:t.seoTitle,seoKeyWord:t.seoKeyWord,seoDescription:t.seoDescription,code:t.code}:{id:0,name:"",parentId:null==t?null:t.id,operate:r,url:"",seoTitle:"",seoKeyWord:"",seoDescription:"",code:this.gencode(t)};case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"remove",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.parent,a.data.children,!(r&&r.children.length>0)){e.next=5;break}return this.$message("存在子节点"),e.abrupt("return");case 5:this.edit(r,2);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"comfirmEdit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(2==this.form.operate||""!=this.form.name){e.next=2;break}return e.abrupt("return");case 2:if(2==this.form.operate){e.next=7;break}return e.next=5,Object(f["f"])(this.form);case 5:e.next=9;break;case 7:return e.next=9,Object(f["b"])(this.form.id);case 9:this.$notify({title:"Success",message:"The ${this.d_titles[this.form.operate]} successfully",type:"success",duration:2e3}),this.dialogVisible=!1,this.fetchCatagory();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"gencode",value:function(e){var t=this.$refs.tree.getNode(e.id);if(t.childNodes&&t.childNodes.length>0){var r=t.childNodes.map((function(e){return Number(e.data.code)})),a=Math.max.apply(Math,Object(o["a"])(r));return"".concat(a+1)}return""==e.code?"101":e.code+"001"}},{key:"handleClose",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.dialogVisible=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}(m["c"]);Object(d["a"])([Object(m["d"])("filterText")],h.prototype,"onFilterTextChange",null),h=Object(d["a"])([Object(m["a"])({name:"ProductCatagory"})],h);var b=h,v=b,g=(r("8b1d"),r("2877")),y=Object(g["a"])(v,a,n,!1,null,"2b4b75dd",null);t["default"]=y.exports},c41a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0},model:{value:e.listQuery,callback:function(t){e.listQuery=t},expression:"listQuery"}},[r("el-form-item",{attrs:{label:"产品名称"}},[r("el-input",{model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),r("el-form-item",{attrs:{label:"类别"}},[r("catagoryDropdown",{model:{value:e.listQuery.catagoryId,callback:function(t){e.$set(e.listQuery,"catagoryId",t)},expression:"listQuery.catagoryId"}})],1),r("el-form-item",{attrs:{label:"日期"}},[r("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd hh:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.listQuery.dateRange,callback:function(t){e.$set(e.listQuery,"dateRange",t)},expression:"listQuery.dateRange"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),r("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:e.addProduct}},[e._v("添加")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{width:"60",align:"center",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.id))])]}}])}),r("el-table-column",{attrs:{width:"120px",align:"center",label:"发布日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.parseTime(t.row.createDate)))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",label:"Status",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-tag",{attrs:{type:e._f("statusFilter")(a.state)}},[e._v("\n          "+e._s(e.showStatus(a.state))+"\n        ")])]}}])}),r("el-table-column",{attrs:{"min-width":"250px",label:"Title"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("router-link",{staticClass:"link-type",attrs:{to:"/shop/productedit/"+a.id}},[r("span",[e._v(e._s(a.name))])])]}}])}),r("el-table-column",{attrs:{align:"center",label:"Actions",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{staticStyle:{"margin-right":"5px"},attrs:{to:"/shop/productedit/"+t.row.id}},[r("el-button",{attrs:{type:"primary",title:"编辑",size:"mini",icon:"el-icon-edit"}})],1),1==t.row.state?r("el-button",{attrs:{type:"primary",title:"撤回",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return e.setProductState(t.row,0)}}}):e._e(),0==t.row.state?r("el-button",{attrs:{type:"primary",title:"发布",size:"mini",icon:"el-icon-s-promotion"},on:{click:function(r){return e.setProductState(t.row,1)}}}):e._e()]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.size},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.getList}})],1)},n=[],o=(r("7f7f"),r("96cf"),r("3b8d")),i=r("d225"),s=r("b0b4"),c=r("308d"),l=r("6bb5"),u=r("4e2b"),p=r("9ab4"),d=r("60a3"),m=r("4372"),f=r("333d"),h=r("5cd8"),b=r("75fb"),v=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.total=0,e.list=[],e.listLoading=!0,e.listQuery={page:1,size:20,name:"",catagoryId:null,dateRange:""},e.popVisible=!1,e.hotTop=0,e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"created",value:function(){this.getList()}},{key:"parseTime",value:function(e){return Object(b["b"])(new Date(e),"yy-MM-dd hh:mm")}},{key:"getList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,t={columns:[{name:"name",search:{value:this.listQuery.name,Opeartor:6}},{name:"productCategoryId",search:{value:this.listQuery.catagoryId,Opeartor:1}},{name:"createDate",search:{valueMin:this.listQuery.dateRange.length>0?this.listQuery.dateRange[0]:"",valueMax:this.listQuery.dateRange.length>1?this.listQuery.dateRange[1]:"",Opeartor:9}}],order:[],pageIndex:this.listQuery.page,pageSize:this.listQuery.size},e.next=4,Object(m["e"])(t);case 4:r=e.sent,a=r.data,this.list=a.data,this.total=a.totalCount,setTimeout((function(){n.listLoading=!1}),500);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"showStatus",value:function(e){return 1==e?"已上架":"未上架"}},{key:"resetForm",value:function(e){this.$refs[e].resetFields()}},{key:"onSubmit",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"showPopover",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.hotTop=t.hotTop;case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setProductState",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["h"])({productId:t.id,state:r});case 2:t.state=r,this.$notify({title:"Success",message:"The post product state successfully",type:"success",duration:2e3});case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"addProduct",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push("/shop/productcreate");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}(d["c"]);v=Object(p["a"])([Object(d["a"])({name:"ProductList",filters:{statusFilter:function(e){var t=["gray","success","danger"];return t[e]}},components:{catagoryDropdown:h["a"],Pagination:f["a"]}})],v);var g=v,y=g,k=(r("defa"),r("2877")),w=Object(k["a"])(y,a,n,!1,null,"27ba8beb",null);t["default"]=w.exports},defa:function(e,t,r){"use strict";var a=r("6857"),n=r.n(a);n.a}}]);
//# sourceMappingURL=shop.b8328ac5.js.map